
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Semantic querying &#8212; semantique 0.1.0 documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="References" href="references.html" />
    <link rel="prev" title="User Guide" href="../guide.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">semantique 0.1.0 documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../background.html">
   Background
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../installation.html">
   Installation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Documentation
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../guide.html">
   User Guide
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Intro
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="references.html">
     References
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="verbs.html">
     Verbs
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="advanced.html">
     Advanced usage
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../reference.html">
   API Reference
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.QueryRecipe.html">
     semantique.QueryRecipe
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.ontology.Ontology.html">
     semantique.ontology.Ontology
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.ontology.Semantique.html">
     semantique.ontology.Semantique
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.factbase.Factbase.html">
     semantique.factbase.Factbase
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.factbase.Opendatacube.html">
     semantique.factbase.Opendatacube
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.factbase.GeotiffArchive.html">
     semantique.factbase.GeotiffArchive
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.extent.SpatialExtent.html">
     semantique.extent.SpatialExtent
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.extent.TemporalExtent.html">
     semantique.extent.TemporalExtent
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.concept.html">
     semantique.concept
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.entity.html">
     semantique.entity
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.event.html">
     semantique.event
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.resource.html">
     semantique.resource
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.appearance.html">
     semantique.appearance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.artifacts.html">
     semantique.artifacts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.atmosphere.html">
     semantique.atmosphere
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.reflectance.html">
     semantique.reflectance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.topography.html">
     semantique.topography
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.collection.html">
     semantique.collection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeProxy.evaluate.html">
     semantique.CubeProxy.evaluate
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeProxy.extract.html">
     semantique.CubeProxy.extract
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeProxy.filter.html">
     semantique.CubeProxy.filter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeProxy.filter_time.html">
     semantique.CubeProxy.filter_time
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeProxy.filter_space.html">
     semantique.CubeProxy.filter_space
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeProxy.groupby.html">
     semantique.CubeProxy.groupby
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeProxy.groupby_time.html">
     semantique.CubeProxy.groupby_time
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeProxy.groupby_space.html">
     semantique.CubeProxy.groupby_space
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeProxy.label.html">
     semantique.CubeProxy.label
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeProxy.reduce.html">
     semantique.CubeProxy.reduce
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeCollectionProxy.compose.html">
     semantique.CubeCollectionProxy.compose
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeCollectionProxy.concatenate.html">
     semantique.CubeCollectionProxy.concatenate
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeCollectionProxy.merge.html">
     semantique.CubeCollectionProxy.merge
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeCollectionProxy.evaluate.html">
     semantique.CubeCollectionProxy.evaluate
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeCollectionProxy.extract.html">
     semantique.CubeCollectionProxy.extract
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeCollectionProxy.filter.html">
     semantique.CubeCollectionProxy.filter
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeCollectionProxy.filter_time.html">
     semantique.CubeCollectionProxy.filter_time
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeCollectionProxy.filter_space.html">
     semantique.CubeCollectionProxy.filter_space
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeCollectionProxy.label.html">
     semantique.CubeCollectionProxy.label
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.CubeCollectionProxy.reduce.html">
     semantique.CubeCollectionProxy.reduce
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.value_label.html">
     semantique.value_label
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.geometries.html">
     semantique.geometries
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.time_instant.html">
     semantique.time_instant
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.time_interval.html">
     semantique.time_interval
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.core.QueryProcessor.html">
     semantique.processor.core.QueryProcessor
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.structures.Cube.html">
     semantique.processor.structures.Cube
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.structures.CubeCollection.html">
     semantique.processor.structures.CubeCollection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.absolute_.html">
     semantique.processor.operators.absolute_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.exponential_.html">
     semantique.processor.operators.exponential_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.cube_root_.html">
     semantique.processor.operators.cube_root_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.natural_logarithm_.html">
     semantique.processor.operators.natural_logarithm_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.square_root_.html">
     semantique.processor.operators.square_root_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.invert_.html">
     semantique.processor.operators.invert_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.add_.html">
     semantique.processor.operators.add_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.divide_.html">
     semantique.processor.operators.divide_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.multiply_.html">
     semantique.processor.operators.multiply_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.power_.html">
     semantique.processor.operators.power_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.subtract_.html">
     semantique.processor.operators.subtract_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.and_.html">
     semantique.processor.operators.and_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.or_.html">
     semantique.processor.operators.or_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.equal_.html">
     semantique.processor.operators.equal_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.exclusive_or_.html">
     semantique.processor.operators.exclusive_or_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.greater_.html">
     semantique.processor.operators.greater_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.greater_equal_.html">
     semantique.processor.operators.greater_equal_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.in_.html">
     semantique.processor.operators.in_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.less_.html">
     semantique.processor.operators.less_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.less_equal_.html">
     semantique.processor.operators.less_equal_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.not_equal_.html">
     semantique.processor.operators.not_equal_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.not_in_.html">
     semantique.processor.operators.not_in_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.intersects_.html">
     semantique.processor.operators.intersects_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.after_.html">
     semantique.processor.operators.after_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.before_.html">
     semantique.processor.operators.before_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.during_.html">
     semantique.processor.operators.during_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.operators.assign_.html">
     semantique.processor.operators.assign_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.mean_.html">
     semantique.processor.reducers.mean_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.product_.html">
     semantique.processor.reducers.product_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.standard_deviation_.html">
     semantique.processor.reducers.standard_deviation_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.sum_.html">
     semantique.processor.reducers.sum_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.variance_.html">
     semantique.processor.reducers.variance_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.all_.html">
     semantique.processor.reducers.all_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.any_.html">
     semantique.processor.reducers.any_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.count_.html">
     semantique.processor.reducers.count_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.percentage_.html">
     semantique.processor.reducers.percentage_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.first_.html">
     semantique.processor.reducers.first_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.last_.html">
     semantique.processor.reducers.last_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.mode_.html">
     semantique.processor.reducers.mode_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.max_.html">
     semantique.processor.reducers.max_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.median_.html">
     semantique.processor.reducers.median_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.reducers.min_.html">
     semantique.processor.reducers.min_
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.utils.convert_datetime64.html">
     semantique.processor.utils.convert_datetime64
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.utils.create_extent_cube.html">
     semantique.processor.utils.create_extent_cube
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.utils.parse_datetime_component.html">
     semantique.processor.utils.parse_datetime_component
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.utils.parse_coords_component.html">
     semantique.processor.utils.parse_coords_component
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.processor.templates.html">
     semantique.processor.templates
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.AlignmentError.html">
     semantique.exceptions.AlignmentError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.EmptyDataError.html">
     semantique.exceptions.EmptyDataError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.InvalidValueTypeError.html">
     semantique.exceptions.InvalidValueTypeError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.InvalidBuildingBlockError.html">
     semantique.exceptions.InvalidBuildingBlockError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.UnknownConceptError.html">
     semantique.exceptions.UnknownConceptError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.UnknownResourceError.html">
     semantique.exceptions.UnknownResourceError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.UnknownResultError.html">
     semantique.exceptions.UnknownResultError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.UnknownReducerError.html">
     semantique.exceptions.UnknownReducerError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.UnknownOperatorError.html">
     semantique.exceptions.UnknownOperatorError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.UnknownDimensionError.html">
     semantique.exceptions.UnknownDimensionError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.UnknownComponentError.html">
     semantique.exceptions.UnknownComponentError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.UnknownLabelError.html">
     semantique.exceptions.UnknownLabelError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.TooManyDimensionsError.html">
     semantique.exceptions.TooManyDimensionsError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.MissingDimensionError.html">
     semantique.exceptions.MissingDimensionError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.MixedDimensionsError.html">
     semantique.exceptions.MixedDimensionsError
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../_generated/semantique.exceptions.MixedTimeZonesError.html">
     semantique.exceptions.MixedTimeZonesError
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="gallery.html">
   Gallery
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../changelog.html">
   Changelog
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Community
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../code_of_conduct.html">
   Code of Conduct
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contributing.html">
   Contributing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/ZGIS/semantique">
   GitHub repository
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/_notebooks/intro.nblink.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.nblink</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/ZGIS/semantique"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/ZGIS/semantique/issues/new?title=Issue%20on%20page%20%2F_notebooks/intro.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/ZGIS/semantique/edit/main/docs/source/_notebooks/intro.nblink"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Content">
   Content
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Prepare">
   Prepare
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Components">
   Components
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#The-query-recipe">
     The query recipe
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#The-factbase">
     The factbase
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#The-ontology">
     The ontology
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#The-spatio-temporal-extent">
     The spatio-temporal extent
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Additional-configuration-parameters">
     Additional configuration parameters
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Processing">
   Processing
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<p>Explore this notebook interactively: <a href="#id1"><span class="problematic" id="id2">|Binder|</span></a>.
.. <a href="#id3"><span class="problematic" id="id4">|Binder|</span></a> image:: <a class="reference external" href="https://mybinder.org/badge.svg">https://mybinder.org/badge.svg</a></p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">target</dt>
<dd class="field-odd"><p><a class="reference external" href="https://mybinder.org/v2/gh/ZGIS/semantique/HEAD?labpath=demo%2F_notebooks/intro.nblink">https://mybinder.org/v2/gh/ZGIS/semantique/HEAD?labpath=demo%2F_notebooks/intro.nblink</a></p>
</dd>
</dl>
</div></blockquote>
<div class="section" id="Semantic-querying">
<h1>Semantic querying<a class="headerlink" href="#Semantic-querying" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">semantique</span></code> (to be pronounced with sophisticated French accent) is a structured framework for semantic querying of earth observation data.</p>
<p>The core of a semantic query is the <strong>query recipe</strong>. It contains instructions that together formulate a recipe for inference of new knowledge. These instructions can be grouped into multiple <strong>results</strong>, each representing a distinct piece of knowledge. A semantic query recipe is different from a regular data cube query statement because it allows you to refer directly to real-world concepts by their name, without having to be aware how these concepts are actually represented by the underlying
data, and all the technical implications that come along with that. For example, you can ask how often <em>water</em> was observed at certain locations during a certain timespan, without the need to specify the rules that define how the collected data should be used to infer if an observation can actually be classified as being <em>water</em>.</p>
<p>These rules are instead specified in a separate component which we call the <strong>ontology</strong>. It maps <em>a priori</em> knowledge of the real world to the data values in the image domain. Hence, an ontology is a repository of rulesets. Each ruleset uniquely defines a <strong>semantic concept</strong> that exists in the real world, by formulating how this concept is represented by collected data (which may possibly be <a class="reference external" href="https://doi.org/10.3390/data4030102">semantically enriched</a> to some extent). Usually, these rules
describe a binary relationship between the data values and the semantic concepts (i.e. the rules can be evaluated to either “true” or “false”). For example:</p>
<blockquote>
<div><p>IF data value a &gt; x AND data value b &lt; y THEN water</p>
</div></blockquote>
<p>The data and information layers are stored together in a <strong>factbase</strong>. A factbase is described by its layout, which is a repository of metadata objects. Each metadata object describes the content of a specific <strong>resource</strong> of data or information.</p>
<p>An ontology and a factbase should be provided when executing a semantic query recipe, together with the spatio-temporal extent in which the query should be evaluated. The query recipe itself is independent from these components. To some extent, at least. Of course, when you refer to a concept named “water” in your query recipe, it can only be executed alongside an ontology that defines how “water” can be represented by collected data, and a factbase that acutally contains these data.
Unfortunately, we can’t do magic.. However, the query recipe itself does not contain any information nor cares about how “water” is defined, and all the technical details that come along with that. There is a clear separation between the <em>definitions of the concepts</em> (these are stored as rules in the ontology) and <em>how these definitions are applied to infer new knowledge</em> (this is specified as instructions in the query recipe).</p>
<p>That also means that query recipes remain fairly stable even when concepts are defined in a different way. For example, if we have a new technique to utilize novel data source for water detection from space, the factbase and the ontology change. The factbase needs to contain these novel data sources, and the ontology needs to implement rules that use the new technique for water detection. However, the query <em>how often was water observed</em> remains the same, since in itself it does not contain any
information on how water is defined. This is in line with the seperation between the <em>world domain</em> and the <em>image domain</em>. Concepts in the world domain are fairly stable, while data and techniques in the image domain constantly change.</p>
<p>Hence, the explicitly separated structure makes the semantic EO data querying process as implemented in <code class="docutils literal notranslate"><span class="pre">semantique</span></code> different from regular EO data querying, where this separation is usually not clear, and the different components are weaved together into a single query statement. Thanks to this structure, <code class="docutils literal notranslate"><span class="pre">semantique</span></code> is useful for those user groups that lack the advanced technical knowledge of EO data, but can benefit from the applications of it in their specific domain. Furthermore, it
eases interoperability of EO data analysis workflows, also for expert users.</p>
<p>This notebook introduces the <code class="docutils literal notranslate"><span class="pre">semantique</span></code> package and provides basic examples of how to use it in a common semantic querying workflow.</p>
<div class="section" id="Content">
<h2>Content<a class="headerlink" href="#Content" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="#Components">Components</a></p>
<ul>
<li><p><a class="reference external" href="#The-query-recipe">The query recipe</a></p></li>
<li><p><a class="reference external" href="#The-factbase">The factbase</a></p></li>
<li><p><a class="reference external" href="#The-ontology">The ontology</a></p></li>
<li><p><a class="reference external" href="#The-spatio-temporal-extent">The spatio-temporal extent</a></p></li>
<li><p><a class="reference external" href="#Additional-configuration-parameters">Additional configuration parameters</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#Processing">Processing</a></p></li>
</ul>
</div>
<div class="section" id="Prepare">
<h2>Prepare<a class="headerlink" href="#Prepare" title="Permalink to this headline">¶</a></h2>
<p>Import the <code class="docutils literal notranslate"><span class="pre">semantique</span></code> package:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>import semantique as sq
</pre></div>
</div>
</div>
<p>Import other packages we will use in this demo:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>import geopandas as gpd
import matplotlib.pyplot as plt
import numpy as np
import json
</pre></div>
</div>
</div>
</div>
<div class="section" id="Components">
<h2>Components<a class="headerlink" href="#Components" title="Permalink to this headline">¶</a></h2>
<p>In <code class="docutils literal notranslate"><span class="pre">semantique</span></code>, a semantic query is processed by a query processor, with respect to a given ontology and factbase, and within the bounds of a given spatio-temporal extent. Below we will describe in more detail how <code class="docutils literal notranslate"><span class="pre">semantique</span></code> allows you to construct the required components for query processing.</p>
<div class="section" id="The-query-recipe">
<h3>The query recipe<a class="headerlink" href="#The-query-recipe" title="Permalink to this headline">¶</a></h3>
<p>The first step in the semantic querying process is to construct the query recipe for inference of new knowledge. That is, you have to write <em>instructions</em> that tell the query processor what steps it should take to obtain your desired result. In <code class="docutils literal notranslate"><span class="pre">semantique</span></code> you can do this in a flexible manner, by combining basic building blocks with each other. Each building block represents a specific component of a result instruction, like a reference to a semantic concept or a certain processing task.</p>
<p>We start with an empty query recipe:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>recipe = sq.QueryRecipe()
</pre></div>
</div>
</div>
<p>Such a <code class="docutils literal notranslate"><span class="pre">QueryRecipe</span></code> object has the same structure as a dictionary, with each element containing the instructions for a specific result. You can request as many results as you want.</p>
<p>Now we have to fill the empty query recipe by adding the instructions for all of our desired results one by one to the <code class="docutils literal notranslate"><span class="pre">QueryRecipe</span></code> instance. We do this by combining semantique’s building blocks together in <strong>processing chains</strong>. A processing chain always has a <em>with-do structure</em>.</p>
<p>In the <em>with</em> part, you attach a block that contains a <strong>reference</strong> to an object that contains data or information. We call this the <em>input object</em> of the processing chain. The query processor will evaluate this reference into a multi-dimensional array containing a set of data values, and usually having at least a spatial and a temporal dimension. Each cell in this array is called a <em>pixel</em> and represents an observation on a specific location in space at a specific moment in time. We also call
the array a <strong>data cube</strong>.</p>
<p>In most cases the reference in the <em>with</em> part of the processing chain will be a reference to a real-world semantic concept defined in an ontology. If the rules in the ontology describe <em>binary relationships</em> between the semantic concepts and the pixel values, the corresponding data cube will be boolean, with “true” values (i.e. 1) for those pixels that are identified as being an observation of the referenced concept, and “false” values (i.e. 0) for all other pixels in the spatio-temporal
extent. In the <a class="reference internal" href="references.html"><span class="doc">References notebook</span></a> you can find an overview of all other types of references a processing chain may start with.</p>
<p>In the <em>do</em> part, you specify one or more <strong>actions</strong> that should be applied to the input object. Each action is a well-defined data cube operation that performs a <em>single</em> task. For example, applying a function to each pixel of a data cube, reducing a particular dimension of a data cube, filtering the pixels of a data cube based on some condition, et cetera. Each building block that represents such an action is labeled by an action word that should intuitively describe the operation it
performs. Therefore we also call these type of building blocks <strong>verbs</strong>. In the <a class="reference internal" href="verbs.html"><span class="doc">Verbs notebook</span></a> you can find an overview of all implemented verbs and their functionalities.</p>
<blockquote>
<div><p>WITH input_object DO apply_first_action THEN apply_second_action THEN apply_third_action</p>
</div></blockquote>
<p>So let’s show a basic example of how to construct such a processing chain. You can refer to any semantic concept by using the <code class="docutils literal notranslate"><span class="pre">sq.concept</span></code> function. How to specify the reference, depends on the structure of the ontology that the query will be processed against. Usually, an ontology does not only list rulesets of semantic concepts, but also formalizes a categorization of these concepts. That is, a reference to a specific semantic concept usually consists of the name of that concept, <em>and</em> the
name of the category it belongs to. Optionally there can be multiple hierarchies of categories, for example to group concepts of different semantic levels (e.g. an entity <em>water body</em> is of a lower semantic level than an entity <em>lake</em>, since lake is by definition always a water body, but a water body not necessarily a lake). The <code class="docutils literal notranslate"><span class="pre">sq.concept</span></code> function lets you specify as many levels as you need, starting with the lowest-level category, and ending with the name of the semantic concept itself.</p>
<p>The common lowest-level categorization groups the semantic concepts into very abstract types. For example, a semantic concept might be an <em>entity</em> (a phenonemon with a distinct and independent <em>existence</em>, e.g. a forest or a lake) or an <em>event</em> (a phenonemon that <em>takes place</em>, e.g. a fire or a flood). If the semantic concepts are stored as direct element of these lowest-level categories without any further subdivision, we can refer to a semantic concept such as <em>water body</em> as follows.</p>
<blockquote>
<div><p><strong>NOTE</strong> Currently we only focus on pixel based queries. Hence, the query processor evaluates for each pixel if the observed phenonemon in that pixel is <em>part of</em> a given entity or not, considering only the data value of the pixel itself. The semantique framework is flexible enough to also support object-based approaches. In that case te rulesets of concepts should look further than only individual pixels. Creating such rulesets is still a challenge..</p>
</div></blockquote>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>water = sq.concept(&quot;entity&quot;, &quot;water&quot;)
print(json.dumps(water, indent = 2))
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{
  &#34;type&#34;: &#34;concept&#34;,
  &#34;reference&#34;: [
    &#34;entity&#34;,
    &#34;water&#34;
  ]
}
</pre></div></div>
</div>
<p>If you use ontologies that include sub-categories, you can simply use the same function to refer to them, in a form as below. There is no limit on how many sub-categories you can use in a reference. Of course, this all depends on the categorization of the ontology that you will use.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>lake = sq.concept(&quot;entity&quot;, &quot;natural_entities&quot;, &quot;water_bodies&quot;, &quot;lake&quot;)
</pre></div>
</div>
</div>
<p>Note that each reference is nothing more than a textual reference. At the construction stage, no data processing is done at all. More specifically: the reference is an object of class <code class="docutils literal notranslate"><span class="pre">CubeProxy</span></code>, meaning that it will be evaluated into a data cube, but only when executing the query recipe.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>type(water)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
semantique.blocks.CubeProxy
</pre></div></div>
</div>
<p>For convenience, commonly used lowest-level semantic concept categories (e.g. entities) are also implemented as separate construction functions, such that you can call them directly. Hence, the code below produces the same output as above.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>water = sq.entity(&quot;water&quot;)
print(json.dumps(water, indent = 2))
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{
  &#34;type&#34;: &#34;concept&#34;,
  &#34;reference&#34;: [
    &#34;entity&#34;,
    &#34;water&#34;
  ]
}
</pre></div></div>
</div>
<p>The <em>do</em> part of the processing chain can be formulated by applying the actions as methods to the input object. Just an in the <em>with</em> part, this will not perform any action just yet. It only constructs the textual recipe for the result, which will be executed at the processing stage.</p>
<p>The code below shows a simple set of instructions that form the recipe for a result. The instructions consist of a single processing chain, starting with a reference to the concept “water”, and subsequently applying a single action to it. During processing, this will be evaluated into a two dimensional data cube with for each location in space the number of times water was observed. Right now, it is nothing more than a textual recipe.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>water_count = sq.entity(&quot;water&quot;).reduce(&quot;time&quot;, &quot;count&quot;)
print(json.dumps(water_count, indent = 2))
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{
  &#34;type&#34;: &#34;processing_chain&#34;,
  &#34;with&#34;: {
    &#34;type&#34;: &#34;concept&#34;,
    &#34;reference&#34;: [
      &#34;entity&#34;,
      &#34;water&#34;
    ]
  },
  &#34;do&#34;: [
    {
      &#34;type&#34;: &#34;verb&#34;,
      &#34;name&#34;: &#34;reduce&#34;,
      &#34;params&#34;: {
        &#34;dimension&#34;: &#34;time&#34;,
        &#34;reducer&#34;: &#34;count&#34;
      }
    }
  ]
}
</pre></div></div>
</div>
<p>Instead saving result instructions as separate objects, we include them as an element in our <code class="docutils literal notranslate"><span class="pre">QueryRecipe</span></code> object. We can include as many result instructions in a single query as we want.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>recipe[&quot;water_count_map&quot;] = sq.entity(&quot;water&quot;).reduce(&quot;time&quot;, &quot;count&quot;)
recipe[&quot;vegetation_count_map&quot;] = sq.entity(&quot;vegetation&quot;).reduce(&quot;time&quot;, &quot;count&quot;)
recipe[&quot;water_percentage_time_series&quot;] = sq.entity(&quot;water&quot;).reduce(&quot;space&quot;, &quot;percentage&quot;)
</pre></div>
</div>
</div>
<p>You can apply as many actions as you want simply by adding more actions blocks to the chain.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>recipe[&quot;avg_water_count&quot;] = sq.entity(&quot;water&quot;).\
    reduce(&quot;time&quot;, &quot;count&quot;).\
    reduce(&quot;space&quot;, &quot;mean&quot;)
</pre></div>
</div>
</div>
<p>Some of the action blocks allow to join information from other objects into the active evaluation object. For example, instead of only calculating the water count as shown above, we might be interested in the summed count of the concepts water and vegetation. Such an instruction can be modelled by nesting multiple processing chains.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>recipe[&quot;summed_count&quot;] = sq.entity(&quot;water&quot;).\
    reduce(&quot;time&quot;, &quot;count&quot;).\
    evaluate(&quot;add&quot;, sq.entity(&quot;vegetation&quot;).reduce(&quot;time&quot;, &quot;count&quot;))
</pre></div>
</div>
</div>
<p>Again, it is important to notice that the query construction phase does not include <em>any</em> loading nor analysis of data or information. It simply creates a textual query recipe, which will be executed at a later stage. The query we constructed in all the examples above looks like <a class="reference external" href="https://github.com/ZGIS/semantique/blob/main/demo/files/recipe.json">this</a>.</p>
<p>We can export and share this query recipe as a JSON file.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>with open(&quot;files/recipe.json&quot;, &quot;w&quot;) as file:
    json.dump(recipe, file, indent = 2)
</pre></div>
</div>
</div>
</div>
<div class="section" id="The-factbase">
<h3>The factbase<a class="headerlink" href="#The-factbase" title="Permalink to this headline">¶</a></h3>
<p>The factbase is the place where the raw EO data and possibly derived information layers are stored. As mentioned before, the factbase is supposed to have a <em>layout</em> file that describes its content. This file has a dictionary-like structure. Each of its elements is again a dictionary, and represents the highest-level category of resources. This nested, hierarchical structure continues depending on the amount of sub-categories, until the point where you reach a metadata object belonging to a
specific resource. It summarizes the data values of that resource, and also contains information on where to find this resource inside the storage structure of the factbase. Unless you create your own factbase, you will usually not write a layout file from scratch. Instead, the factbase you are using should already come with a layout file.</p>
<p><code class="docutils literal notranslate"><span class="pre">semantique</span></code> utilizes the layout file to create an internal model of the factbase. It pairs it with a <strong>retriever function</strong>. This function is able to read a reference to a specific resource, lookup its metadata object in the layout file, and use these metadata to retrieve the corresponding data values as a data cube from the actual data storage location.</p>
<p>However, the exact structure of a layout file (i.e. what metadata keys it exactly contains), as well as the way the retriever function has to retrieve the actual data values, heavily depends on the format of the data storage. Data may be stored on a database server utilizing some specific database management system, simply as files on disk, or whatever else.</p>
<p>Therefore, <code class="docutils literal notranslate"><span class="pre">semantique</span></code> offers a flexible structure in which different factbase formats are modelled by different classes, with different retriever functions. All these classes inherit from an abstract base class named <code class="docutils literal notranslate"><span class="pre">Factbase</span></code>, which serves a general template for how a factbase should be modelled.</p>
<p>Currently <code class="docutils literal notranslate"><span class="pre">semantique</span></code> contains two built-in factbase formats. The first one is called <code class="docutils literal notranslate"><span class="pre">Opendatacube</span></code> and is tailored to usage with the EO specific <a class="reference external" href="https://www.opendatacube.org/">OpenDataCube</a> database management system. This class has a OpenDataCube-specific retriever function that knows exactly how to retrieve data from this system. You would initialize an instance from this class as by providing it the layout file, as well as an OpenDataCube connection object. This object allows the
retriever function to connect with the database server an actually retrieve data from it. Probably all factbase formats that store the data on a server will need such kind of a connection object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">factbase</span> <span class="o">=</span> <span class="n">sq</span><span class="o">.</span><span class="n">factbase</span><span class="o">.</span><span class="n">Opendatacube</span><span class="p">(</span><span class="n">layout</span><span class="p">,</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">datacube</span><span class="o">.</span><span class="n">Datacube</span><span class="p">())</span>
</pre></div>
</div>
<p>The second one is called <code class="docutils literal notranslate"><span class="pre">GeotiffArchive</span></code> and has a much simpler format that assumes each resource is stored as a GeoTIFF file within a single ZIP archive. This class contains a retriever function that knows how to load GeoTIFF files as multi-dimensional arrays in Python, and how to subset (and possibly also resample and/or reproject) them to a given spatio-temporal extent. Instead of a database connection, we provide the initializer with the location of the ZIP file in which the resources are
stored.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">factbase</span> <span class="o">=</span> <span class="n">sq</span><span class="o">.</span><span class="n">factbase</span><span class="o">.</span><span class="n">GeotiffArchive</span><span class="p">(</span><span class="n">layout</span><span class="p">,</span> <span class="n">src</span> <span class="o">=</span> <span class="s2">&quot;foo.zip&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>In the future more built-in factbase formats might be added, but as user you can also write your own class for a specific factbase format that you use. See the <a class="reference external" href="https://zgis.github.io/semantique/_notebooks/advanced.html#Creating-custom-factbase-classes">Advanced usage notebook</a> for details. It is important to note that the query processor does not care at all what the format of the factbase is and how resources are retrieved from the factbase. It only cares about what input the retriever
function accepts, and in what format it returns the retrieved resource.</p>
<p>In our examples we will use the simpler <code class="docutils literal notranslate"><span class="pre">GeotiffArchive</span></code> factbase format. We have a set of <a class="reference external" href="https://github.com/ZGIS/semantique/blob/main/demo/files/resources.zip">example resources</a> for a tiny <a class="reference external" href="https://github.com/ZGIS/semantique/blob/main/demo/files/footprint.json">spatial extent</a> and only three different timestamps, as well as a <a class="reference external" href="https://github.com/ZGIS/semantique/blob/main/demo/files/factbase.json">layout file</a> that contains all necessary metadata entries the retriever function of
this format needs.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>with open(&quot;files/factbase.json&quot;, &quot;r&quot;) as file:
    layout = json.load(file)
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>factbase = sq.factbase.GeotiffArchive(layout, src = &quot;files/resources.zip&quot;)
</pre></div>
</div>
</div>
<p>The retriever function is a method of this factbase instance, which will internally be called by the <code class="docutils literal notranslate"><span class="pre">QueryProcessor</span></code> whenever a specific resource is referenced.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>hasattr(factbase, &quot;retrieve&quot;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
</div>
<div class="section" id="The-ontology">
<h3>The ontology<a class="headerlink" href="#The-ontology" title="Permalink to this headline">¶</a></h3>
<p>The ontology plays an essential role in the semantic querying framework. It serves as the mapping between the image-domain and the real-world domain. That is, it contains rulesets that define how real-world concepts and their properties are represented by the data in the factbase. By doing that, it also formalizes how concepts are categorized and how the relations between multiple concepts and/or their properties are structured.</p>
<p>These rulesets are stored in a dictionary-like structure. Each of its elements is again a dictionary, and represents the highest-level category of concepts. This nested, hierarchical structure continues depending on the amount of sub-categories, until the point where you reach a ruleset defining a specific concept.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">semantique</span></code>, an ontology is always paired with a <strong>translator function</strong>. This function is able to read a reference to a specific concept, lookup its ruleset object in the ontology, and use these rules to translate the reference into a data cube. When the rules describe <em>binary relationships</em> between the semantic concepts and the data values, this data cube will be boolean, where pixels that are identified as being an observation of the concept get a a “true” value (i.e. 1), and the other
pixels get a “false” value (i.e. 0).</p>
<p>However, the way the rules are specified, and therefore also the way they should be evaluated by the translator function, are not fixed. Basically, you can do this in any way you want. For example, your rules could be a set of parameters for a given machine learning model, and your translator a function that knows how to run that model with those parameters. Your rules could also be paths or download links to some Python scripts, and your translator a function that knows how to execute these
scripts. Hence, just as the factbase models described before, the ontology models in <code class="docutils literal notranslate"><span class="pre">semantique</span></code> can have many different formats.</p>
<p>Therefore, semantique offers a flexible structure in which different ontology formats are modelled by different classes, with different translator functions. All these classes inherit from an abstract base class named <code class="docutils literal notranslate"><span class="pre">Ontology</span></code>, which serves a general template for how an ontology should be modelled. Currently there is only one built-in ontology format in <code class="docutils literal notranslate"><span class="pre">semantique</span></code>, called (unsurprisinly) <code class="docutils literal notranslate"><span class="pre">Semantique</span></code>. We will introduce this format below. As a user you can also write your own class for
a specific ontology format that you use by inheriting from the abstract <code class="docutils literal notranslate"><span class="pre">Ontology</span></code> class. See the <a class="reference external" href="https://zgis.github.io/semantique/_notebooks/advanced.html#Creating-custom-ontology-classes">Advanced usage notebook</a> for details. It is important to note that the query processor does not care at all what the format of the ontology is and how it translated concept references. It only cares about what input the translator function accepts, and in what format it returns the translated concepts.</p>
<p>Back to the <code class="docutils literal notranslate"><span class="pre">Semantique</span></code> ontology format. We can create an instance of it by providing a dictionary with rulesets that was shared with us. However, expert users can also create their own ontology from scratch. In that case, you’ll start with an empty ontology, and iteratively fill it with rules afterwards:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ontology = sq.ontology.Semantique()
</pre></div>
</div>
</div>
<p>The translator function is a method of this ontology instance, which will internally be called by the query processor whenever a specific concept is referenced.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>hasattr(ontology, &quot;translate&quot;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
True
</pre></div></div>
</div>
<p>In this example, we will focus solely on defining entities, and use a one-layer categorization. That is, our only category is <em>entity</em>. The first step is to add this category as element to the ontology. Its value can still be an empty dictionary. We will add the concept definitions afterwards.</p>
<blockquote>
<div><p><strong>NOTE</strong> The examples we use below are heavily simplified and don’t always make sense, but are meant mainly to get an idea of how the package works.</p>
</div></blockquote>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ontology[&quot;entity&quot;] = {}
</pre></div>
</div>
</div>
<p>Lets first look deeper into the structure of concept definitions. Each concept is defined by one or more named <strong>properties</strong> it has. For example, a entity <em>lake</em> may be defined by its <em>color</em> (a blueish, water-like color) in combination with its <em>texture</em> (it has an approximately flat surface). That is, the ruleset of a semantic concept definition is a set of distinct property definitions.</p>
<p>Now, we need to construct rules that define a binary relationship between a property and the data values in the factbase. That is, the rules should define for each pixel in our data if it meets a specific property (“true”), or not (“false”). In the Semantique-format, we can do this by utilizing the same building blocks as we did for constructing our query recipe. The only difference is that a processing chain will now usually start with a reference to a factbase resource. During query
processing, this reference will be send to the retriever function of the factbase, which will return a data cube filled with the requested data values. Then, pre-defined actions will be applied to this data cube. Usually these actions will encompass the evaluation of a comparison operator, in which the value of each pixel is compared to some constant (set of) value(s), reuturning a “true” value (i.e. 1) when the comparison holds, and a “false” value (i.e. 0) otherwise.</p>
<p>For example: we utilize the “Color type” resource to define if a pixel has a water-like color. This resource is a layer of semantically enriched data and contains categorical values. The categories with indices <code class="docutils literal notranslate"><span class="pre">21</span></code>, <code class="docutils literal notranslate"><span class="pre">22</span></code>, <code class="docutils literal notranslate"><span class="pre">23</span></code> and <code class="docutils literal notranslate"><span class="pre">23</span></code> correspond to color combinations that <em>appear</em> to be water. Hence, we state that a pixel meets the color property of a lake when its value in this “Color type” resource corresponds with one of the above mentioned indices. Furthermore, we state that a
pixel meets the texture property of a lake when its value in the “slope” resource equals 0.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ontology[&quot;entity&quot;][&quot;lake&quot;] = {
    &quot;color&quot;: sq.appearance(&quot;Color type&quot;).evaluate(&quot;in&quot;, [21, 22, 23, 24]),
    &quot;texture&quot;: sq.topography(&quot;slope&quot;).evaluate(&quot;equal&quot;, 0)
}
</pre></div>
</div>
</div>
<p>To define the entity, its property cubes are combined using an <code class="docutils literal notranslate"><span class="pre">all</span></code> operator. That means that a pixel is evaluated as being part of an entity if and only if it meets <em>all</em> properties of that entity.</p>
<p>Now we define a second entity <em>river</em>, which we say has the same color property of a lake, but instead has a non-zero slope.</p>
<blockquote>
<div><p><strong>NOTE</strong> Different entities do not <em>need</em> to have the same properties defined.</p>
</div></blockquote>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ontology[&quot;entity&quot;][&quot;river&quot;] = {
    &quot;color&quot;: sq.appearance(&quot;Color type&quot;).evaluate(&quot;in&quot;, [21, 22, 23, 24]),
    &quot;texture&quot;: sq.topography(&quot;slope&quot;).evaluate(&quot;not_equal&quot;, 0)
}
</pre></div>
</div>
</div>
<p>As you see, there is a relation between the entities <em>lake</em> and <em>river</em>. They share a property. However, we defined the same property twice. This is not needed, because in the Semantique-format, you can always refer to other entities in your ontology, as well as to properties in these entities. In this way, you can intuitively model relations between different semantic concepts. Hence, the same <em>river</em> definition can also be structured as follows:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ontology[&quot;entity&quot;][&quot;river&quot;] = {
    &quot;color&quot;: sq.entity(&quot;lake&quot;, property = &quot;color&quot;),
    &quot;texture&quot;: sq.entity(&quot;lake&quot;, property = &quot;texture&quot;).evaluate(&quot;invert&quot;)
}
</pre></div>
</div>
</div>
<p>Or, to take it a step further, as below. Basically we are saying here that a <em>lake</em> has the color of <em>water</em> and the texture of a <em>plain</em> (again, we oversimplify here!).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ontology[&quot;entity&quot;][&quot;water&quot;] = {
    &quot;color&quot;: sq.appearance(&quot;Color type&quot;).evaluate(&quot;in&quot;, [21, 22, 23, 24]),
}

ontology[&quot;entity&quot;][&quot;vegetation&quot;] = {
    &quot;color&quot;: sq.appearance(&quot;Color type&quot;).evaluate(&quot;in&quot;, [1, 2, 3, 4, 5, 6]),
}

ontology[&quot;entity&quot;][&quot;plain&quot;] = {
    &quot;color&quot;: sq.entity(&quot;vegetation&quot;, property = &quot;color&quot;),
    &quot;texture&quot;: sq.topography(&quot;slope&quot;).evaluate(&quot;equal&quot;, 0)
}

ontology[&quot;entity&quot;][&quot;lake&quot;] = {
    &quot;color&quot;: sq.entity(&quot;water&quot;, property = &quot;color&quot;),
    &quot;texture&quot;: sq.entity(&quot;plain&quot;, property = &quot;texture&quot;)
}

ontology[&quot;entity&quot;][&quot;river&quot;] = {
    &quot;color&quot;: sq.entity(&quot;water&quot;, property = &quot;color&quot;),
    &quot;texture&quot;: sq.entity(&quot;plain&quot;, property = &quot;texture&quot;).evaluate(&quot;invert&quot;)
}
</pre></div>
</div>
</div>
<p>We can also model relationships in a way where some entity is the union of other entities.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ontology[&quot;entity&quot;][&quot;natural_area&quot;] = {
    &quot;members&quot;: sq.collection(sq.entity(&quot;water&quot;), sq.entity(&quot;vegetation&quot;)).merge(&quot;or&quot;)
}
</pre></div>
</div>
</div>
<p>Now you have an idea of how to construct and ontology from scratch using the built-in Semantique-format, we move on and construct a complete ontology in one go. We use simpler rulesets as above, since accurately modelling more complex concepts is not as easy as we pictured it in our oversimplified examples.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ontology = sq.ontology.Semantique()
ontology[&quot;entity&quot;] = {}

ontology[&quot;entity&quot;][&quot;water&quot;] = {&quot;color&quot;: sq.appearance(&quot;Color type&quot;).evaluate(&quot;in&quot;, [21, 22, 23, 24])}
ontology[&quot;entity&quot;][&quot;vegetation&quot;] = {&quot;color&quot;: sq.appearance(&quot;Color type&quot;).evaluate(&quot;in&quot;, [1, 2, 3, 4, 5, 6])}
ontology[&quot;entity&quot;][&quot;builtup&quot;] = {&quot;color&quot;: sq.appearance(&quot;Color type&quot;).evaluate(&quot;in&quot;, [13, 14, 15, 16, 17])}
ontology[&quot;entity&quot;][&quot;cloud&quot;] = {&quot;color&quot;: sq.atmosphere(&quot;Color type&quot;).evaluate(&quot;equal&quot;, 25)}
ontology[&quot;entity&quot;][&quot;snow&quot;] = {&quot;color&quot;: sq.appearance(&quot;Color type&quot;).evaluate(&quot;in&quot;, [29, 30])}
</pre></div>
</div>
</div>
<p>Our constructed ontology looks like <a class="reference external" href="https://github.com/ZGIS/semantique/blob/main/demo/files/ontology.json">this</a>. We can export and share this ontology as a JSON file.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>with open(&quot;files/ontology.json&quot;, &quot;w&quot;) as file:
    json.dump(ontology, file, indent = 2)
</pre></div>
</div>
</div>
<p>That also means that as non-expert we don’t have to worry about constructing our own ontology from scratch. We can simply load a shared ontology in the same way as we loaded the layout file of the factbase, and construct the ontology object accordingly.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>with open(&quot;files/ontology.json&quot;, &quot;r&quot;) as file:
    rules = json.load(file)

ontology = sq.ontology.Semantique(rules)
</pre></div>
</div>
</div>
</div>
<div class="section" id="The-spatio-temporal-extent">
<h3>The spatio-temporal extent<a class="headerlink" href="#The-spatio-temporal-extent" title="Permalink to this headline">¶</a></h3>
<p>Semantic query recipes are general recipes for inference of new knowledge. In theory, they are not restricted to specific areas or specific timespans. However, the recipes are executed with respect to given spatio-temporal bounds. That is, we need to provide both a spatial and temporal extent when executing a semantic query recipe.</p>
<p>To model a spatial extent, <code class="docutils literal notranslate"><span class="pre">semantique</span></code> contains the <code class="docutils literal notranslate"><span class="pre">SpatialExtent</span></code> class. An instance of this class can be initialized by providing it any object that can be read by the <a class="reference external" href="https://geopandas.org/docs/reference/api/geopandas.GeoDataFrame.html">GeoDataFrame</a> initializer of the <code class="docutils literal notranslate"><span class="pre">geopandas</span></code> package. Any additional keyword arguments will be forwarded to this initializer. In practice, this means you can read any GDAL-supported file format with <code class="docutils literal notranslate"><span class="pre">geopandas.read_file</span></code>, and then forward the
resulting <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code> directly to the <code class="docutils literal notranslate"><span class="pre">SpatialExtent</span></code> initializer. In this demo we use a small, rectangular area around Zell am See in Salzbuger Land, Austria.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>geodf = gpd.read_file(&quot;files/footprint.geojson&quot;)
geodf.explore()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;head&gt;
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;

        &lt;script&gt;
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        &lt;/script&gt;

    &lt;style&gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}&lt;/style&gt;
    &lt;style&gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}&lt;/style&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-1.12.4.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;

            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
                #map_8a6d55f4a1f3d99673f3a6d01a6fd185 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
            &lt;/style&gt;


                    &lt;style&gt;
                        .foliumtooltip {

                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    &lt;/style&gt;

&lt;/head&gt;
&lt;body&gt;

            &lt;div class=&quot;folium-map&quot; id=&quot;map_8a6d55f4a1f3d99673f3a6d01a6fd185&quot; &gt;&lt;/div&gt;

&lt;/body&gt;
&lt;script&gt;

            var map_8a6d55f4a1f3d99673f3a6d01a6fd185 = L.map(
                &quot;map_8a6d55f4a1f3d99673f3a6d01a6fd185&quot;,
                {
                    center: [47.32182848564892, 12.802874710259392],
                    crs: L.CRS.EPSG3857,
                    zoom: 10,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );
            L.control.scale().addTo(map_8a6d55f4a1f3d99673f3a6d01a6fd185);





            var tile_layer_b32a2f0d54b3e47eb1389d7d6bb5d495 = L.tileLayer(
                &quot;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
                {&quot;attribution&quot;: &quot;Data by \u0026copy; \u003ca href=\&quot;http://openstreetmap.org\&quot;\u003eOpenStreetMap\u003c/a\u003e, under \u003ca href=\&quot;http://www.openstreetmap.org/copyright\&quot;\u003eODbL\u003c/a\u003e.&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 18, &quot;maxZoom&quot;: 18, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            ).addTo(map_8a6d55f4a1f3d99673f3a6d01a6fd185);


            map_8a6d55f4a1f3d99673f3a6d01a6fd185.fitBounds(
                [[47.29549949362208, 12.763509083137114], [47.34815747767577, 12.84224033738167]],
                {}
            );


        function geo_json_aa6a5022d44564a99860330c27ca9993_styler(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
            }
        }
        function geo_json_aa6a5022d44564a99860330c27ca9993_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.75};
            }
        }
        function geo_json_aa6a5022d44564a99860330c27ca9993_pointToLayer(feature, latlng) {
            var opts = {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 2, &quot;stroke&quot;: true, &quot;weight&quot;: 3};

            let style = geo_json_aa6a5022d44564a99860330c27ca9993_styler(feature)
            Object.assign(opts, style)

            return new L.CircleMarker(latlng, opts)
        }

        function geo_json_aa6a5022d44564a99860330c27ca9993_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        geo_json_aa6a5022d44564a99860330c27ca9993.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_aa6a5022d44564a99860330c27ca9993_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_aa6a5022d44564a99860330c27ca9993 = L.geoJson(null, {
                onEachFeature: geo_json_aa6a5022d44564a99860330c27ca9993_onEachFeature,

                style: geo_json_aa6a5022d44564a99860330c27ca9993_styler,
                pointToLayer: geo_json_aa6a5022d44564a99860330c27ca9993_pointToLayer
        });

        function geo_json_aa6a5022d44564a99860330c27ca9993_add (data) {
            geo_json_aa6a5022d44564a99860330c27ca9993
                .addData(data)
                .addTo(map_8a6d55f4a1f3d99673f3a6d01a6fd185);
        }
            geo_json_aa6a5022d44564a99860330c27ca9993_add({&quot;bbox&quot;: [12.763509083137114, 47.29549949362208, 12.84224033738167, 47.34815747767577], &quot;features&quot;: [{&quot;bbox&quot;: [12.763509083137114, 47.29549949362208, 12.84224033738167, 47.34815747767577], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[12.763509083137114, 47.29745731209052], [12.766203393446109, 47.34815747767577], [12.84224033738167, 47.3461974559335], [12.83947215089213, 47.29549949362208], [12.763509083137114, 47.29745731209052]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});



    geo_json_aa6a5022d44564a99860330c27ca9993.bindTooltip(
    function(layer){
    let div = L.DomUtil.create(&#x27;div&#x27;);

    return div
    }
    ,{&quot;className&quot;: &quot;foliumtooltip&quot;, &quot;sticky&quot;: true});

&lt;/script&gt;" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>space = sq.SpatialExtent(geodf)
</pre></div>
</div>
</div>
<p>To model a temporal extent, <code class="docutils literal notranslate"><span class="pre">semantique</span></code> contains the <code class="docutils literal notranslate"><span class="pre">TemporalExtent</span></code> class. An instance of this class can be initialized by providing it the first timestamp of the timespan, and the last timestamp of the timespan. The given interval is treated as being closed at both sides.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>time = sq.TemporalExtent(&quot;2019-01-01&quot;, &quot;2020-12-31&quot;)
</pre></div>
</div>
</div>
<p>Just as with the spatial extent, there is a lot of flexibility in how you can provide your timestamps. You can provide dates in formats as <code class="docutils literal notranslate"><span class="pre">&quot;2020-12-31&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;2020/12/31&quot;</span></code>, but also complete ISO8601 timestamps such as <code class="docutils literal notranslate"><span class="pre">&quot;2020-12-31T14:37:22&quot;</span></code>. As long as the <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.Timestamp.html">Timestamp</a> initializer of the <code class="docutils literal notranslate"><span class="pre">pandas</span></code> package can understand it, it is supported by <code class="docutils literal notranslate"><span class="pre">semantique</span></code>. Any additional keyword arguments will be forwarded to this
initializer.</p>
</div>
<div class="section" id="Additional-configuration-parameters">
<h3>Additional configuration parameters<a class="headerlink" href="#Additional-configuration-parameters" title="Permalink to this headline">¶</a></h3>
<p>The last thing we have left before executing our semantic query recipe, is to define some additional configuration parameters. This includes the desired coordinate reference system (CRS) in which spatial coordinates should be represented, as well as the time zone in which temporal coordinates should be represented. You should also provide the desired spatial resolution of your output, as a list containing respectively the y and x resolution in CRS units (i.e. usually meters for projected CRS and
degrees for geographic CRS) and including direction. Note that for most CRS, that means that the first value (i.e. the y-value) of the resolution will always be negative.</p>
<p>There are also other configuration parameters that can be included to tune the behaviour of the query processor. See the <a class="reference internal" href="advanced.html"><span class="doc">Advanced usage notebook</span></a> for details.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>config = {&quot;crs&quot;: 3035, &quot;tz&quot;: &quot;UTC&quot;, &quot;spatial_resolution&quot;: [-10, 10]}
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Processing">
<h2>Processing<a class="headerlink" href="#Processing" title="Permalink to this headline">¶</a></h2>
<p>Now we have all components constructed, we are ready to execute our semantic query recipe. Hooray! This step is quite simple. You call the <code class="docutils literal notranslate"><span class="pre">execute</span></code> method of our <code class="docutils literal notranslate"><span class="pre">QueryRecipe</span></code> instance, and provide it with the factbase object, the ontology object, the spatial and temporal extens, and the additional configuration parameters. Then, just be a bit patient… Internally, the query processor will solve all references, evaluate them into data cubes, and apply the defined actions to them. In the
<a class="reference external" href="https://zgis.github.io/semantique/_notebooks/advanced.html#The-query-processor-class">Advanced usage notebook</a> the implementation of query processing is described in some more detail.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>config[&quot;track_types&quot;] = False
response = recipe.execute(factbase, ontology, space, time, **config)
</pre></div>
</div>
</div>
<p>The response of the query is a dictionary which one element per result.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>for key in response.keys():
    print(key)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
water_count_map
vegetation_count_map
water_percentage_time_series
avg_water_count
summed_count
</pre></div></div>
</div>
<p>Each result is stored as an instance of the <a class="reference external" href="http://xarray.pydata.org/en/stable/user-guide/data-structures.html#dataarray">DataArray</a> class from the <code class="docutils literal notranslate"><span class="pre">xarray</span></code> package, which serves as the backbone for most of the analysis tasks the query processor performs.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>for x in response.values():
    print(type(x))
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;xarray.core.dataarray.DataArray&#39;&gt;
&lt;class &#39;xarray.core.dataarray.DataArray&#39;&gt;
&lt;class &#39;xarray.core.dataarray.DataArray&#39;&gt;
&lt;class &#39;xarray.core.dataarray.DataArray&#39;&gt;
&lt;class &#39;xarray.core.dataarray.DataArray&#39;&gt;
</pre></div></div>
</div>
<p>The dimensions the arrays depend on the actions that were called in the result instruction. Some results might only have spatial dimensions (i.e. a map).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>response[&quot;water_count_map&quot;]
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;water_count_map&#x27; (y: 563, x: 576)&gt;
array([[1., 1., 1., ..., 0., 0., 0.],
       [1., 1., 1., ..., 0., 0., 0.],
       [1., 1., 1., ..., 0., 0., 0.],
       ...,
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]])
Coordinates:
    spatial_ref   int64 0
    temporal_ref  int64 0
    feature       (y, x) float64 1.0 1.0 1.0 1.0 1.0 1.0 ... 1.0 1.0 1.0 1.0 1.0
  * y             (y) float64 2.697e+06 2.697e+06 ... 2.691e+06 2.691e+06
  * x             (x) float64 4.53e+06 4.53e+06 4.53e+06 ... 4.536e+06 4.536e+06</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'water_count_map'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>y</span>: 563</li><li><span class='xr-has-index'>x</span>: 576</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-91d79b49-9032-4fcb-afad-7c08a646ea90' class='xr-array-in' type='checkbox' checked><label for='section-91d79b49-9032-4fcb-afad-7c08a646ea90' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 ... 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0</span></div><div class='xr-array-data'><pre>array([[1., 1., 1., ..., 0., 0., 0.],
       [1., 1., 1., ..., 0., 0., 0.],
       [1., 1., 1., ..., 0., 0., 0.],
       ...,
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]])</pre></div></div></li><li class='xr-section-item'><input id='section-1b0267f5-0c3f-4dc1-b889-afe820c3eada' class='xr-section-summary-in' type='checkbox'  checked><label for='section-1b0267f5-0c3f-4dc1-b889-afe820c3eada' class='xr-section-summary' >Coordinates: <span>(5)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>spatial_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-4608e58d-40ba-4e01-940b-b23fb81e8cce' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4608e58d-40ba-4e01-940b-b23fb81e8cce' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8264e5cc-79d2-4da9-a703-b898ad411278' class='xr-var-data-in' type='checkbox'><label for='data-8264e5cc-79d2-4da9-a703-b898ad411278' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>crs_wkt :</span></dt><dd>PROJCS[&quot;ETRS89-extended / LAEA Europe&quot;,GEOGCS[&quot;ETRS89&quot;,DATUM[&quot;European_Terrestrial_Reference_System_1989&quot;,SPHEROID[&quot;GRS 1980&quot;,6378137,298.257222101,AUTHORITY[&quot;EPSG&quot;,&quot;7019&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6258&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4258&quot;]],PROJECTION[&quot;Lambert_Azimuthal_Equal_Area&quot;],PARAMETER[&quot;latitude_of_center&quot;,52],PARAMETER[&quot;longitude_of_center&quot;,10],PARAMETER[&quot;false_easting&quot;,4321000],PARAMETER[&quot;false_northing&quot;,3210000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Northing&quot;,NORTH],AXIS[&quot;Easting&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;3035&quot;]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314140356</dd><dt><span>inverse_flattening :</span></dt><dd>298.257222101</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>GRS 1980</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>ETRS89</dd><dt><span>horizontal_datum_name :</span></dt><dd>European Terrestrial Reference System 1989</dd><dt><span>projected_crs_name :</span></dt><dd>ETRS89-extended / LAEA Europe</dd><dt><span>grid_mapping_name :</span></dt><dd>lambert_azimuthal_equal_area</dd><dt><span>latitude_of_projection_origin :</span></dt><dd>52.0</dd><dt><span>longitude_of_projection_origin :</span></dt><dd>10.0</dd><dt><span>false_easting :</span></dt><dd>4321000.0</dd><dt><span>false_northing :</span></dt><dd>3210000.0</dd><dt><span>spatial_ref :</span></dt><dd>PROJCS[&quot;ETRS89-extended / LAEA Europe&quot;,GEOGCS[&quot;ETRS89&quot;,DATUM[&quot;European_Terrestrial_Reference_System_1989&quot;,SPHEROID[&quot;GRS 1980&quot;,6378137,298.257222101,AUTHORITY[&quot;EPSG&quot;,&quot;7019&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6258&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4258&quot;]],PROJECTION[&quot;Lambert_Azimuthal_Equal_Area&quot;],PARAMETER[&quot;latitude_of_center&quot;,52],PARAMETER[&quot;longitude_of_center&quot;,10],PARAMETER[&quot;false_easting&quot;,4321000],PARAMETER[&quot;false_northing&quot;,3210000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Northing&quot;,NORTH],AXIS[&quot;Easting&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;3035&quot;]]</dd><dt><span>GeoTransform :</span></dt><dd>4530110.0 10.0 0.0 2696630.0 0.0 -10.0</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>temporal_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-990e0c13-95e3-474b-837b-b757e8e2886f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-990e0c13-95e3-474b-837b-b757e8e2886f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cd922c56-e59e-470a-b327-b43782311d4a' class='xr-var-data-in' type='checkbox'><label for='data-cd922c56-e59e-470a-b327-b43782311d4a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>zone :</span></dt><dd>UTC</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>feature</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.0 1.0 1.0 1.0 ... 1.0 1.0 1.0 1.0</div><input id='attrs-6ebe07c5-23f8-41d0-8e1a-9aa2913dc8a2' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6ebe07c5-23f8-41d0-8e1a-9aa2913dc8a2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b492b5de-634c-4049-b426-94edd4fc3ccc' class='xr-var-data-in' type='checkbox'><label for='data-b492b5de-634c-4049-b426-94edd4fc3ccc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>value_type :</span></dt><dd>nominal</dd><dt><span>value_labels :</span></dt><dd>{1: &#x27;feature_1&#x27;}</dd></dl></div><div class='xr-var-data'><pre>array([[1., 1., 1., ..., 1., 1., 1.],
       [1., 1., 1., ..., 1., 1., 1.],
       [1., 1., 1., ..., 1., 1., 1.],
       ...,
       [1., 1., 1., ..., 1., 1., 1.],
       [1., 1., 1., ..., 1., 1., 1.],
       [1., 1., 1., ..., 1., 1., 1.]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>2.697e+06 2.697e+06 ... 2.691e+06</div><input id='attrs-04862010-6fc4-405c-92ad-d112623a0992' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-04862010-6fc4-405c-92ad-d112623a0992' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4d312fe3-bd66-4fc8-80fd-792a68f59f1c' class='xr-var-data-in' type='checkbox'><label for='data-4d312fe3-bd66-4fc8-80fd-792a68f59f1c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([2696625., 2696615., 2696605., ..., 2691025., 2691015., 2691005.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>4.53e+06 4.53e+06 ... 4.536e+06</div><input id='attrs-7d381eda-00cd-4c21-98ae-c901226086bd' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-7d381eda-00cd-4c21-98ae-c901226086bd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6563fa06-2b24-4aeb-ab84-4d88c78bce0d' class='xr-var-data-in' type='checkbox'><label for='data-6563fa06-2b24-4aeb-ab84-4d88c78bce0d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([4530115., 4530125., 4530135., ..., 4535845., 4535855., 4535865.])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-c4e883e9-7f23-47c6-83a2-d2611545d609' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-c4e883e9-7f23-47c6-83a2-d2611545d609' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>Other results might only have the temporal dimension (i.e. a time series).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>response[&quot;water_percentage_time_series&quot;]
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;water_percentage_time_series&#x27; (time: 3)&gt;
array([ 0.        , 13.81611407, 24.2398732 ])
Coordinates:
  * time          (time) datetime64[ns] 2019-12-15T10:17:33.408715 ... 2020-1...
    spatial_ref   int64 0
    temporal_ref  int64 0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'water_percentage_time_series'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 3</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-0166e679-ad29-4cab-ba36-710c79de26ee' class='xr-array-in' type='checkbox' checked><label for='section-0166e679-ad29-4cab-ba36-710c79de26ee' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>0.0 13.82 24.24</span></div><div class='xr-array-data'><pre>array([ 0.        , 13.81611407, 24.2398732 ])</pre></div></div></li><li class='xr-section-item'><input id='section-3c24cce5-ab3d-4039-bf5d-ed73d3217fb0' class='xr-section-summary-in' type='checkbox'  checked><label for='section-3c24cce5-ab3d-4039-bf5d-ed73d3217fb0' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2019-12-15T10:17:33.408715 ... 2...</div><input id='attrs-7ca1af7e-36d7-411f-844e-dcd574161cbf' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7ca1af7e-36d7-411f-844e-dcd574161cbf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5b286d61-0135-4f54-9044-523d200c61ae' class='xr-var-data-in' type='checkbox'><label for='data-5b286d61-0135-4f54-9044-523d200c61ae' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>value_type :</span></dt><dd>time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2019-12-15T10:17:33.408715000&#x27;, &#x27;2020-09-05T10:17:43.167942000&#x27;,
       &#x27;2020-12-19T10:17:34.610661000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>spatial_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-0b361ec5-ef5b-4419-b8dd-26a34cd3f548' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0b361ec5-ef5b-4419-b8dd-26a34cd3f548' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ca6b7723-7e0b-4e77-afe9-73f312b03921' class='xr-var-data-in' type='checkbox'><label for='data-ca6b7723-7e0b-4e77-afe9-73f312b03921' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>crs_wkt :</span></dt><dd>PROJCS[&quot;ETRS89-extended / LAEA Europe&quot;,GEOGCS[&quot;ETRS89&quot;,DATUM[&quot;European_Terrestrial_Reference_System_1989&quot;,SPHEROID[&quot;GRS 1980&quot;,6378137,298.257222101,AUTHORITY[&quot;EPSG&quot;,&quot;7019&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6258&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4258&quot;]],PROJECTION[&quot;Lambert_Azimuthal_Equal_Area&quot;],PARAMETER[&quot;latitude_of_center&quot;,52],PARAMETER[&quot;longitude_of_center&quot;,10],PARAMETER[&quot;false_easting&quot;,4321000],PARAMETER[&quot;false_northing&quot;,3210000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Northing&quot;,NORTH],AXIS[&quot;Easting&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;3035&quot;]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314140356</dd><dt><span>inverse_flattening :</span></dt><dd>298.257222101</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>GRS 1980</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>ETRS89</dd><dt><span>horizontal_datum_name :</span></dt><dd>European Terrestrial Reference System 1989</dd><dt><span>projected_crs_name :</span></dt><dd>ETRS89-extended / LAEA Europe</dd><dt><span>grid_mapping_name :</span></dt><dd>lambert_azimuthal_equal_area</dd><dt><span>latitude_of_projection_origin :</span></dt><dd>52.0</dd><dt><span>longitude_of_projection_origin :</span></dt><dd>10.0</dd><dt><span>false_easting :</span></dt><dd>4321000.0</dd><dt><span>false_northing :</span></dt><dd>3210000.0</dd><dt><span>spatial_ref :</span></dt><dd>PROJCS[&quot;ETRS89-extended / LAEA Europe&quot;,GEOGCS[&quot;ETRS89&quot;,DATUM[&quot;European_Terrestrial_Reference_System_1989&quot;,SPHEROID[&quot;GRS 1980&quot;,6378137,298.257222101,AUTHORITY[&quot;EPSG&quot;,&quot;7019&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6258&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4258&quot;]],PROJECTION[&quot;Lambert_Azimuthal_Equal_Area&quot;],PARAMETER[&quot;latitude_of_center&quot;,52],PARAMETER[&quot;longitude_of_center&quot;,10],PARAMETER[&quot;false_easting&quot;,4321000],PARAMETER[&quot;false_northing&quot;,3210000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Northing&quot;,NORTH],AXIS[&quot;Easting&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;3035&quot;]]</dd><dt><span>GeoTransform :</span></dt><dd>4530110.0 10.0 0.0 2696630.0 0.0 -10.0</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>temporal_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-2f4d18e3-c14c-4765-9e4a-74826d0d6884' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2f4d18e3-c14c-4765-9e4a-74826d0d6884' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-32238ce2-9ffd-4bd2-b300-d6f0f3b4c38a' class='xr-var-data-in' type='checkbox'><label for='data-32238ce2-9ffd-4bd2-b300-d6f0f3b4c38a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>zone :</span></dt><dd>UTC</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-22bf2017-fcdd-4b40-a2d9-69b78b46fd65' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-22bf2017-fcdd-4b40-a2d9-69b78b46fd65' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>And other results might even be dimensionless (i.e. a single aggregated value).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>response[&quot;avg_water_count&quot;]
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;avg_water_count&#x27; ()&gt;
array(0.38055987)
Coordinates:
    spatial_ref   int64 0
    temporal_ref  int64 0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'avg_water_count'</div></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-bcf581b8-d8ce-4f53-98d4-cbef92a8a53e' class='xr-array-in' type='checkbox' checked><label for='section-bcf581b8-d8ce-4f53-98d4-cbef92a8a53e' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>0.3806</span></div><div class='xr-array-data'><pre>array(0.38055987)</pre></div></div></li><li class='xr-section-item'><input id='section-0fef3f33-da4c-4a10-abc5-ffc32f59d560' class='xr-section-summary-in' type='checkbox'  checked><label for='section-0fef3f33-da4c-4a10-abc5-ffc32f59d560' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>spatial_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-4f54a870-5721-46b8-b583-f2a6e5c8336e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4f54a870-5721-46b8-b583-f2a6e5c8336e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-553afb69-9b1c-4d28-8888-2890e9b948d9' class='xr-var-data-in' type='checkbox'><label for='data-553afb69-9b1c-4d28-8888-2890e9b948d9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>crs_wkt :</span></dt><dd>PROJCS[&quot;ETRS89-extended / LAEA Europe&quot;,GEOGCS[&quot;ETRS89&quot;,DATUM[&quot;European_Terrestrial_Reference_System_1989&quot;,SPHEROID[&quot;GRS 1980&quot;,6378137,298.257222101,AUTHORITY[&quot;EPSG&quot;,&quot;7019&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6258&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4258&quot;]],PROJECTION[&quot;Lambert_Azimuthal_Equal_Area&quot;],PARAMETER[&quot;latitude_of_center&quot;,52],PARAMETER[&quot;longitude_of_center&quot;,10],PARAMETER[&quot;false_easting&quot;,4321000],PARAMETER[&quot;false_northing&quot;,3210000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Northing&quot;,NORTH],AXIS[&quot;Easting&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;3035&quot;]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314140356</dd><dt><span>inverse_flattening :</span></dt><dd>298.257222101</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>GRS 1980</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>ETRS89</dd><dt><span>horizontal_datum_name :</span></dt><dd>European Terrestrial Reference System 1989</dd><dt><span>projected_crs_name :</span></dt><dd>ETRS89-extended / LAEA Europe</dd><dt><span>grid_mapping_name :</span></dt><dd>lambert_azimuthal_equal_area</dd><dt><span>latitude_of_projection_origin :</span></dt><dd>52.0</dd><dt><span>longitude_of_projection_origin :</span></dt><dd>10.0</dd><dt><span>false_easting :</span></dt><dd>4321000.0</dd><dt><span>false_northing :</span></dt><dd>3210000.0</dd><dt><span>spatial_ref :</span></dt><dd>PROJCS[&quot;ETRS89-extended / LAEA Europe&quot;,GEOGCS[&quot;ETRS89&quot;,DATUM[&quot;European_Terrestrial_Reference_System_1989&quot;,SPHEROID[&quot;GRS 1980&quot;,6378137,298.257222101,AUTHORITY[&quot;EPSG&quot;,&quot;7019&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6258&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4258&quot;]],PROJECTION[&quot;Lambert_Azimuthal_Equal_Area&quot;],PARAMETER[&quot;latitude_of_center&quot;,52],PARAMETER[&quot;longitude_of_center&quot;,10],PARAMETER[&quot;false_easting&quot;,4321000],PARAMETER[&quot;false_northing&quot;,3210000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Northing&quot;,NORTH],AXIS[&quot;Easting&quot;,EAST],AUTHORITY[&quot;EPSG&quot;,&quot;3035&quot;]]</dd><dt><span>GeoTransform :</span></dt><dd>4530110.0 10.0 0.0 2696630.0 0.0 -10.0</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>temporal_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-22c91659-8293-457b-8ffb-0f06396ba525' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-22c91659-8293-457b-8ffb-0f06396ba525' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c23872be-fbab-4926-95dd-a793d54d2b7e' class='xr-var-data-in' type='checkbox'><label for='data-c23872be-fbab-4926-95dd-a793d54d2b7e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>zone :</span></dt><dd>UTC</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1ffc8ad2-b8d8-4cc0-8681-212084554efc' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-1ffc8ad2-b8d8-4cc0-8681-212084554efc' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>There may also be results that contain both the spatial and temporal dimension, as well as results that contain an additonal, thematic dimension.</p>
<p>Since the result objects are <code class="docutils literal notranslate"><span class="pre">xarray.DataArray</span></code> objects, we can use xarray for any further processing, and also to visualize the results. Again, see the <a class="reference external" href="http://xarray.pydata.org/en/stable/index.html">xarray documentation</a> for more details on what that package has to offer (which is a lot!). For now, we will just plot some of our obtained results to give an impression. In the <a class="reference internal" href="gallery.html"><span class="doc">Gallery notebook</span></a> you can find much more of such examples.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>f, (ax1, ax2) = plt.subplots(1, 2, figsize = (15, 5))

water_count = response[&quot;water_count_map&quot;]
values = list(range(int(np.nanmin(water_count)), int(np.nanmax(water_count)) + 1))
levels = [x - 0.5 for x in values + [max(values) + 1]]
colors = plt.cm.Blues
water_count.plot(ax = ax1, levels = levels, cmap = colors, cbar_kwargs = {&quot;ticks&quot;: values, &quot;label&quot;: &quot;count&quot;})
ax1.set_title(&quot;Water&quot;)

vegetation_count = response[&quot;vegetation_count_map&quot;]
values = list(range(int(np.nanmin(vegetation_count)), int(np.nanmax(vegetation_count)) + 1))
levels = [x - 0.5 for x in values + [max(values) + 1]]
colors = plt.cm.Greens
vegetation_count.plot(ax = ax2, levels = levels, cmap = colors, cbar_kwargs = {&quot;ticks&quot;: values, &quot;label&quot;: &quot;count&quot;})
ax2.set_title(&quot;Vegetation&quot;)

plt.tight_layout()
plt.draw()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/_notebooks_intro_73_0.png" src="../_images/_notebooks_intro_73_0.png" />
</div>
</div>
</div>
</div>


              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="../guide.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">User Guide</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="references.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">References</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
            &copy; Copyright 2021, Department of Geoinformatics – Z_GIS.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>